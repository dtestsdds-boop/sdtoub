<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>إنشاء مسؤول - SDTORA</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #1e1e1e; 
            color: white; 
            padding: 50px; 
            text-align: center; 
        }
        .container { 
            max-width: 500px; 
            margin: 0 auto; 
            background: #2d2d2d; 
            padding: 30px; 
            border-radius: 10px; 
        }
        input, button { 
            width: 100%; 
            padding: 12px; 
            margin: 10px 0; 
            border-radius: 5px; 
            border: 1px solid #555; 
            background: #3d3d3d; 
            color: white; 
        }
        button { 
            background: #007acc; 
            border: none; 
            cursor: pointer; 
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>إنشاء مستخدم مسؤول</h2>
        <input type="email" id="adminEmail" placeholder="البريد الإلكتروني">
        <input type="password" id="adminPassword" placeholder="كلمة المرور">
        <button onclick="createAdmin()">إنشاء مسؤول</button>
        <div id="message" style="margin-top: 20px;"></div>
    </div>

    <script>
        async function createAdmin() {
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            const messageDiv = document.getElementById('message');
            
            try {
                messageDiv.innerHTML = '⏳ جاري إنشاء المستخدم...';
                
                // إنشاء المستخدم في Authentication
                const userCredential = await firebase.auth().createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // جعله مسؤولاً في Firestore
                await db.collection('users').doc(user.uid).set({
                    email: email,
                    role: 'admin',
                    isAdmin: true,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                messageDiv.innerHTML = '✅ تم إنشاء المسؤول بنجاح!';
                messageDiv.innerHTML += '<br>✅ يمكنك الآن استخدام هذا الحساب في صفحة الإدارة';
                
            } catch (error) {
                messageDiv.innerHTML = '❌ خطأ: ' + error.message;
            }
        }
    </script>
</body>
</html>