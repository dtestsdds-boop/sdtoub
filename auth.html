<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ - SDTORA</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        .auth-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 40px;
            background: var(--win-glass);
            border-radius: var(--win-radius-lg);
            border: 1px solid var(--win-glass-border);
            backdrop-filter: blur(20px);
        }
        
        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .auth-input {
            padding: 15px;
            border-radius: var(--win-radius);
            border: 1px solid var(--win-border);
            background: rgba(255,255,255,0.1);
            color: var(--win-text);
            font-size: 16px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .auth-input:focus {
            outline: none;
            border-color: var(--win-accent-light);
        }
        
        .test-accounts {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: var(--win-radius);
            margin-top: 20px;
            border: 1px solid var(--win-border);
        }
    </style>
</head>
<body>
    <div class="auth-container">
        <h2 style="text-align: center; margin-bottom: 30px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
        
        <form class="auth-form" id="loginForm">
            <input type="email" class="auth-input" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" id="email" required>
            <input type="password" class="auth-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" id="password" required>
            <button type="submit" class="btn btn-primary">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
        </form>
        
        <div id="message" style="margin-top: 20px; text-align: center;"></div>

        <!-- Ø­Ø³Ø§Ø¨Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± -->
        <div class="test-accounts">
            <h4 style="margin-bottom: 10px;">ğŸ’¡ Ù„Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©:</h4>
            <p><strong>test1@sdtora.com</strong> / ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: <strong>123456</strong></p>
            <p><strong>test2@sdtora.com</strong> / ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: <strong>123456</strong></p>
            <button onclick="fillTestAccount(1)" class="btn-secondary" style="padding: 5px 10px; margin: 5px;">Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø­Ø³Ø§Ø¨ 1</button>
            <button onclick="fillTestAccount(2)" class="btn-secondary" style="padding: 5px 10px; margin: 5px;">Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø­Ø³Ø§Ø¨ 2</button>
        </div>
        
        <p style="text-align: center; margin-top: 20px;">
            Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="register.html" style="color: var(--win-accent-light);">Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</a>
        </p>
    </div>

    <script>
        // Ù…Ù„Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        function fillTestAccount(accountNumber) {
            if (accountNumber === 1) {
                document.getElementById('email').value = 'test1@sdtora.com';
                document.getElementById('password').value = '123456';
            } else {
                document.getElementById('email').value = 'test2@sdtora.com';
                document.getElementById('password').value = '123456';
            }
        }

        // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const messageDiv = document.getElementById('message');
            
            // Ø¥Ø¸Ù‡Ø§Ø± ØªØ­Ù…ÙŠÙ„
            messageDiv.innerHTML = '<p style="color: #FF9800;">â³ Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...</p>';
            
            firebase.auth().signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    // ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­
                    messageDiv.innerHTML = '<p style="color: #4CAF50;">âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ...</p>';
                    setTimeout(() => {
                        window.location.href = 'wallet.html';
                    }, 1500);
                })
                .catch((error) => {
                    let errorMessage = 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
                    
                    switch(error.code) {
                        case 'auth/invalid-login-credentials':
                            errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
                            break;
                        case 'auth/user-not-found':
                            errorMessage = 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨ Ù…Ø±ØªØ¨Ø· Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ';
                            break;
                        case 'auth/wrong-password':
                            errorMessage = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©';
                            break;
                        case 'auth/invalid-email':
                            errorMessage = 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­';
                            break;
                        default:
                            errorMessage = error.message;
                    }
                    
                    messageDiv.innerHTML = `<p style="color: #f44336;">âŒ ${errorMessage}</p>`;
                });
        });

        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ ØªÙˆØ¬ÙŠÙ‡Ù‡ Ù…Ø¨Ø§Ø´Ø±Ø©
        firebase.auth().onAuthStateChanged((user) => {
            if (user) {
                window.location.href = 'wallet.html';
            }
        });

        // Ù…Ù„Ø¡ Ø­Ø³Ø§Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
        setTimeout(() => {
            fillTestAccount(1);
        }, 1000);
    </script>
</body>
</html>